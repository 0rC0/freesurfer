#ifndef _itk_VTKPolyDataToPolylineMeshFilter_h_
#define _itk_VTKPolyDataToPolylineMeshFilter_h_

#include "itkMesh.h"
#include "itkMeshSource.h"
#include "itkPolylineCell.h"

#include <vtkPolyData.h>
#include <vtkSmartPointer.h>



namespace itk
{

  template <class TOutputMesh>
    class VTKPolyDataToPolylineMeshFilter : public MeshSource<TOutputMesh>
  {
  public:
    typedef VTKPolyDataToPolylineMeshFilter Self;
    typedef MeshSource<TOutputMesh>         Superclass;
    typedef SmartPointer<Self>              Pointer;
    typedef SmartPointer<const Self>        ConstPointer;

    itkNewMacro  (Self);
    itkTypeMacro (VTKPolyDataToPolylineMeshFilter, MeshSource);

    typedef TOutputMesh OutputMeshType;
    typedef typename OutputMeshType::MeshTraits MeshTraits;
    typedef typename OutputMeshType::PointType  PointType;
    typedef typename OutputMeshType::PixelType  PixelType;

    /** Some convenient typedefs. */
    typedef typename OutputMeshType::Pointer         OutputMeshPointer;
    typedef typename OutputMeshType::CellTraits      CellTraits;
    typedef typename OutputMeshType::CellIdentifier  CellIdentifier;
    typedef typename OutputMeshType::CellType        CellType;
    typedef typename OutputMeshType::CellAutoPointer CellAutoPointer;
    typedef typename OutputMeshType::PointIdentifier PointIdentifier;
    typedef typename CellTraits::PointIdIterator     PointIdIterator;
    
    typedef typename OutputMeshType::PointsContainerPointer
      PointsContainerPointer;
    
    typedef typename OutputMeshType::PointsContainer
      PointsContainer;

    typedef PolylineCell<CellType>                      PolylineCellType;
    typedef typename  PolylineCellType::SelfAutoPointer SelfAutoPointer;

    void SetVTKPolyData (vtkPolyData *polydata)
    { m_VTKPolyData = polydata; }
    vtkPolyData *GetVTKPolyData (void) const
    { return m_VTKPolyData; }

  protected:
    VTKPolyDataToPolylineMeshFilter();
    ~VTKPolyDataToPolylineMeshFilter() {}
    void PrintSelf(std::ostream& os, Indent indent) const;

    /** Reads the file */
    void GenerateData();

  private:
    VTKPolyDataToPolylineMeshFilter (const Self&);
    void operator=(const Self&);

    vtkSmartPointer<vtkPolyData> m_VTKPolyData;
    
  };

} // end of namespace

#ifndef ITK_MANUAL_INSTANTIATION
#include "itkVTKPolyDataToPolylineMeshFilter.txx"
#endif

#endif
