#!/bin/csh -f
#
# getformat_from_stem - determines format from a stem by appending
# various format extensions and checking whether the file exists.
# For this reason, the actual format returned will depend upon
# whether the sequences of formats tried if multiple formats for 
# the same stem are present.
#
# Return: format extension and exit 0. If fails, then exits 1.
#
# $Id: getformat_from_stem,v 1.1 2006/04/12 22:45:37 greve Exp $

if($#argv != 1) then
  echo "getformat_from_stem stem"
  exit 1;
endif

set stem = $argv[1];

if(-e $stem.nii.gz) then
  echo nii.gz
  exit 0
endif

if(-e $stem.nii) then
  echo nii
  exit 0
endif

if(-e $stem.mgh) then
  echo mgh
  exit 0
endif

if(-e $stem.mgz) then
  echo mgz
  exit 0
endif

if(-e $stem.bhdr) then
  echo bhdr
  exit 0
endif

if(-e $stem.img) then
  echo img
  exit 0
endif

echo "ERROR: cannot determine format for stem $stem"

exit 1

2
