#
# Dim size is 163 165 202
#
# Usage: ../kvlBuildAtlasMeshWithoutGUI numberOfUpsamplingSteps meshSizeX meshSizeY meshSizeZ stiffness logDirectory fileName1 [ fileName2 ... ]
#
# In order to figure out what the size of the resulting mesh will be, the effect
# of 1 times upsampling of n nodes (in one direction) is 2*n-1. Therefore, after
# z times upsampling there will be m = 2^z * n - ( 2*z + 1 ) nodes.
#
# In order to turn this around, if we want to have m nodes after z times
# upsampling, we should start with n = ( m + 2*z + 1 ) / 2^z nodes.
#
# So starting with [ 21 21 26 ] nodes will give us, after 3x upsampling, a
# mesh of [ 161 161 201 ] nodes.
# 
# This is probably too much. Let's try [ 11 11 13 ] which gives after 3x
# upsampling [ 81 81 97 ] nodes.

command="kvlBuildAtlasMeshWithoutGUI 3 11 11 13 0.1 /tmp/koenLogDir \
         subject0[1-9]/BucknerSegmentationWithAddedCSF.mgz >& \
         /tmp/koenOutput.txt &";
echo $command
eval $command


